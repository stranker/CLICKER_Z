[gd_scene load_steps=3 format=2]

[ext_resource path="res://icon.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]

resource_name = "Survivor.gd"
script/source = "extends Node2D

var shooting_time = 2
var weapon = preload(\"res://Object/Weapon.tscn\")
var curr_weapon

func _ready():
	$ShootTime.wait_time = shooting_time
	curr_weapon = weapon.instance()
	curr_weapon.create_weapon(\"Pistol\",0,0.5,\"miau\",\"miau\")
	get_tree().root.call_deferred(\"add_child\",curr_weapon)
	curr_weapon.set_position($WeaponPos.global_position)
	pass

func _on_ShootTime_timeout():
	if curr_weapon != null:
		randomize()
		if Global.ZOMBI_LIST.size()>0:
			var zn = int(rand_range(Global.ZOMBI_LIST.size()/2,Global.ZOMBI_LIST.size()))
			if Global.ZOMBI_LIST[zn].alive():
				curr_weapon.shoot(Global.ZOMBI_LIST[zn])
	pass"
_sections_unfolded = [ "Resource" ]

[node name="Survivor" type="Node2D" index="0"]

script = SubResource( 1 )

[node name="Skin" type="Sprite" parent="." index="0"]

position = Vector2( 0.157462, 0 )
scale = Vector2( 0.373377, 1 )
texture = ExtResource( 1 )

[node name="ShootTime" type="Timer" parent="." index="1"]

process_mode = 1
wait_time = 1.0
one_shot = false
autostart = true

[node name="WeaponPos" type="Position2D" parent="." index="2"]

position = Vector2( -0.487671, 13.1672 )

[connection signal="timeout" from="ShootTime" to="." method="_on_ShootTime_timeout"]


